<mat-card>
    <mat-card-header>
        <h2 class="example-h2">Control de Stock</h2>
    </mat-card-header>
    <mat-card-actions>
        <h5 class="example-h2">Marque los campos por los cuales desea realizar la b√∫squeda y posteriormente ingrese los datos</h5>
    </mat-card-actions>
  <br>
    <mat-card-content>
      <div style="overflow-x: auto; overflow-y: hidden;">


        <section class="example-section" >
          <mat-checkbox class="example-margin" [formControl]="checkPrecioCompra">Precio Compra</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkPrecioVenta">Precio Venta</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkMarca">Marca</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkDescripcion">Descripcion</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkStock">Stock</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkStockMinimo">Stock Minimo</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkCodigo">Codigo</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkUnidad">Unidad</mat-checkbox>
          <mat-checkbox class="example-margin" [formControl]="checkCategoriaPadre">Categoria Padre</mat-checkbox>
          </section>

          <form [formGroup]="producto">
            <table class="example-full-widthh" cellspacing="0">
              <tr>
                <td>
                  <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkPrecioCompra.value">
                    <mat-label>Precio Compra</mat-label>
                    <input type="number" matInput placeholder="Precio Compra" formControlName="PrecioCompra">
                  </mat-form-field>
                </td>

                <td>
                  <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkPrecioVenta.value">
                    <mat-label>Precio Venta</mat-label>
                    <input type="number" matInput placeholder="Precio Venta" formControlName="PrecioVenta">
                  </mat-form-field>
                </td>

                  <td>
                    <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkMarca.value">
                    <mat-label>Marca</mat-label>
                    <input matInput placeholder="Marca" formControlName="Marca">
                  </mat-form-field>
                </td>

                  <td>
                    <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkDescripcion.value">
                    <mat-label>Descripcion</mat-label>
                    <input matInput placeholder="Descripcion" formControlName="Descripcion">
                  </mat-form-field>
                </td>

                <td>
                    <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkStock.value">
                      <mat-label>Stock</mat-label>
                      <input type="number" matInput placeholder="Stock" formControlName="Stock">
                    </mat-form-field>
                  </td>

                    <td>
                      <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkStockMinimo.value">
                      <mat-label>Stock Minimo</mat-label>
                      <input type="number" matInput placeholder="Stock Minimo" formControlName="StockMinimo">
                    </mat-form-field>
                  </td>

                  <td>
                    <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkCodigo.value">
                    <mat-label>Codigo</mat-label>
                    <input matInput placeholder="Codigo" formControlName="Codigo">
                  </mat-form-field>
                </td>

                <td>
                  <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkUnidad.value">
                  <mat-label>Unidad</mat-label>
                  <input matInput placeholder="Unidad" formControlName="Unidad">
                </mat-form-field>
              </td>

                  <td>
                    <mat-form-field class="example-full-width" appearance="outline" *ngIf="checkCategoriaPadre.value">
                      <mat-label>Categoria Padre</mat-label>
                      <mat-select formControlName="CategoriaPadre">
                        <mat-option selected  [value]="0" disabled>
                          Seleccione una Categoria Padre
                        </mat-option>
                        <mat-option *ngFor="let categoria of categoriasPadre" [value]="categoria.id" (click)="cargarListaCategorias(categoria.id)">
                          {{categoria.nombre}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>

                  <td>
                    <mat-form-field class="example-full-width" appearance="outline" *ngIf="producto.get('CategoriaPadre')!.value!=''">
                      <mat-label>Categoria Hija</mat-label>
                      <mat-select formControlName="IdCategoria">
                        <mat-option selected  [value]="0" disabled>
                          Seleccione una Categoria Hija
                        </mat-option>
                        <mat-option *ngFor="let categoria of categorias" [value]="categoria.id">
                          {{categoria.nombre}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>

              </tr>
            </table>
        </form>
      </div>
      <button mat-fab color="primary"
      matTooltip="Buscar la informacion de Stock"
      matTooltipClass="example-tooltip-red"
      aria-label="Button that shows a red tooltip"
      class="example-button" color="primary"
      (click)="applyFilter()">
      <mat-icon>search</mat-icon>
      </button>
<br>
<br>


<mat-card-content>

  <div class="contenedorTabla table-responsive ">
  <table mat-table [dataSource]="dataSource">

    <!-- Precio Compra Column -->
    <ng-container matColumnDef="PrecioCompra">
      <th mat-header-cell *matHeaderCellDef> Precio Compra </th>
      <td mat-cell *matCellDef="let element"> {{element.precioCompra}}</td>
    </ng-container>

    <!-- Precio Venta Column -->
    <ng-container matColumnDef="PrecioVenta">
      <th mat-header-cell *matHeaderCellDef> Precio Venta </th>
      <td mat-cell *matCellDef="let element"> {{element.precioVenta}} </td>
    </ng-container>

    <!-- Marca Column -->
    <ng-container matColumnDef="Marca">
      <th mat-header-cell *matHeaderCellDef> Marca </th>
      <td mat-cell *matCellDef="let element"> {{element.marca}}</td>
    </ng-container>

     <!-- Descripcion Column -->
     <ng-container matColumnDef="Descripcion">
      <th mat-header-cell *matHeaderCellDef> Descripcion </th>
      <td mat-cell *matCellDef="let element">{{element.descripcion}} </td>
    </ng-container>

      <!-- Stock Column -->
      <ng-container matColumnDef="Stock">
          <th mat-header-cell *matHeaderCellDef> Stock </th>
          <td mat-cell *matCellDef="let element">{{element.stock}} </td>
      </ng-container>

       <!-- ID Column -->
    <ng-container matColumnDef="StockMinimo">
      <th mat-header-cell *matHeaderCellDef> Stock Minimo </th>
      <td mat-cell *matCellDef="let element"> {{element.stockMinimo}} </td>
    </ng-container>

       <!-- Unidad Column -->
       <ng-container matColumnDef="Unidad">
          <th mat-header-cell *matHeaderCellDef> Unidad </th>
          <td mat-cell *matCellDef="let element">{{element.unidad}} </td>
      </ng-container>

   <!-- Codigo Column -->
   <ng-container matColumnDef="Codigo">
      <th mat-header-cell *matHeaderCellDef> Codigo </th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button aria-label="Example icon button with a vertical three dot icon" (click)="openDialogCodigoBarra(element)">
          <mat-icon>insert_chart_outlined</mat-icon>
        </button>
       </td>
    </ng-container>

    <!-- Fecha Movimiento Column -->
   <ng-container matColumnDef="FechaMovimiento">
      <th mat-header-cell *matHeaderCellDef> Fecha Movimiento </th>
      <td mat-cell *matCellDef="let element">{{element.fechaMovimiento | date:'dd-MM-yyyy hh:mm a'}} </td>
    </ng-container>

     <!-- Categoria Column -->
   <ng-container matColumnDef="IdCategoria">
      <th mat-header-cell *matHeaderCellDef> Categoria </th>
      <td mat-cell *matCellDef="let element">{{element.idCategoriaNavigation.nombre}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  </div>
</mat-card-content>


                <mat-paginator [length]="length"
                [pageSize]="pageSize"
                [pageSizeOptions]="pageSizeOptions"
                [pageIndex]="pageIndex"
                (page)="handlePage($event)"
                aria-label="Select page"
                >
                </mat-paginator>

    </mat-card-content>
  </mat-card>
<br>
